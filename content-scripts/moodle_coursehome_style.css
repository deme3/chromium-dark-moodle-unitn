/* Less flashy text selection TESTING */

::selection {
    background-color: var(--addon-unitn-red)40;
}

#headerUniTN {
    background: var(--addon-light-black)!important;
}

a[href="https://dol.unitn.it/moodle"]::after,
a[href^="https://webapps.unitn.it/du/it/Persona/"]::after {
    content: " (warning: white page!)"
}

a[href^="https://didatticaonline.unitn.it/ateneo/course/view.php?id="]::after {
    content: " (dark mode enabled)"
}

.aalink {
    color: var(--addon-light-red) !important;
}

.aalink:hover {
    color: var(--addon-red) !important;
}

#headerUniTN .nav-item .nav-link {
    color: var(--addon-white) !important;
}

.dropdown-menu {
    background: var(--addon-black) !important;
    color: var(--addon-white) !important;
}

.dropdown-menu .dropdown-item {
    color: var(--addon-white) !important
}

.dropdown-item:hover,
.dropdown-item:focus {
    color: var(--addon-white) !important;
    background-color: var(--addon-grey) !important;
}

.dropdown-item.active,
.dropdown-item:active {
    color: var(--addon-white) !important;
    background-color: var(--addon-red) !important;
}

.card,
#page-enrol-users #filterform,
.que .history,
.userprofile .profile_tree section,
.groupinfobox,
.well,
#region-main {
    background: var(--addon-light-black)!important;
}

#region-main .card {
    border-color: var(--addon-black) !important;
}


/* Settings */

.form-control,
.custom-select,
#fitem_id_interests input[type=text] {
    background-color: var(--addon-light-black)!important;
    border: 1px solid var(--addon-grey) !important;
    outline: none !important;
    color: var(--addon-white) !important;
}

.form-control:focus,
.custom-select:focus {
    border-color: var(--addon-black) !important;
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
}

.mform fieldset {
    border-bottom: 1px solid var(--addon-grey) !important;
}


/* WYSIWIG */

div.editor_atto_toolbar {
    background: var(--addon-grey) !important;
    border: 1px solid var(--addon-grey) !important;
}

.editor_atto_content_wrap,
.editor_atto+textarea {
    border: none !important;
    background: none !important;
}

div.editor_atto_toolbar div.atto_group {
    border: 1px solid var(--addon-black) !important;
    border-bottom: 1px solid var(--addon-black) !important;
    background: transparent !important;
}

div.editor_atto_toolbar button+button {
    border-left: 1px solid var(--addon-black) !important;
}

div.editor_atto_toolbar button .icon {
    color: var(--addon-white) !important;
}

.editor_atto_toolbar button {
    outline: none !important;
}

.editor_atto_toolbar button:hover {
    background: var(--addon-black) !important;
}


/* Sidebar links */

.list-group-item:not(.active) {
    background: var(--addon-light-black)!important;
    color: var(--addon-white);
    border-width: 1px;
    border-color: var(--addon-dark-grey);
}

.list-group-item:not(.active):hover {
    background: var(--addon-black) !important;
    color: var(--addon-white) !important;
}


/*
    Areas that are drawn grey
    Such as the background behind the main section
    and the background behind the left sidebar
*/

[data-region="drawer"],
#region-main-box,
body,
html {
    background: var(--addon-black) !important;
    color: var(--addon-white) !important;
}


/* Course section titles */

.sectionname {
    color: var(--addon-light-red) !important;
}


/* Course section separators */

.course-content ul li.section.main {
    border-bottom: 1px solid var(--addon-grey) !important;
}


/* navbar 
(didatticaonline logo + user)
use reduced mode always to not flash user*/

.navbar {
    min-height: 60px !important;
}

.navbar-brand {
    padding: 1rem 1rem 1rem 1rem !important;
    background-size: 25% !important;
}

#nav-drawer {
    margin-top: calc(60px - 50px - -3em) !important;
    height: calc(100% - 60px - 45px) !important;
}

.message-drawer {
    margin-top: calc(60px - 50px - -3em) !important;
    height: calc(100% - 60px - 45px) !important;
}

.message-drawer .header-container,
.message-drawer .body-container #message-drawer-view-overview-container,
.message-drawer .body-container .content-message-container,
.message-drawer .footer-container [data-region="content-messages-footer-container"] {
    background: var(--addon-light-black)!important;
}

.message-drawer .footer-container [data-region="content-messages-footer-container"] [data-region="send-message-txt"] {
    background: #373a3c !important;
}

.message-drawer .footer-container .border-top[data-region="view-conversation"] {
    border-color: #353535 !important;
}

.message-drawer .message.received .tail {
    border-bottom-color: transparent !important;
}

.message-drawer .message {
    background: var(--addon-light-black)!important;
    color: var(--addon-white) !important;
    box-shadow: none !important;
    border: 1px solid var(--addon-grey) !important;
}

.header-container .border-bottom[data-region="view-settings"],
.header-container .border-bottom[data-region="view-conversation"] {
    background: var(--addon-light-black)!important;
    border-color: #353535 !important;
}

.body-container .h-100[data-region="view-settings"] {
    background: var(--addon-light-black) !important;
}


/* Custom switch*/

.switch input:not(:checked)+label::before {
    background: var(--addon-grey) !important;
}


/* Custom radio */

.custom-radio>.custom-control-input:not(:checked)+label::before {
    background: var(--addon-grey) !important;
}

#page {
    margin-top: calc(60px - -3em) !important;
}

.btn-light {
    color: var(--addon-white) !important;
    background-color: #373a3c !important;
    border-color: #373a3c !important;
}

.btn-light:hover {
    color: var(--addon-white) !important;
    background-color: #252728 !important;
    border-color: #1f2021 !important;
}

.btn-light:focus,
.btn-light.focus {
    -webkit-box-shadow: 0 0 0 0.2rem rgb(55 58 60 / 50%) !important;
    box-shadow: 0 0 0 0.2rem rgb(55 58 60 / 50%) !important;
}


/* Take care of selector bg-gray */

.btn-light.bg-gray {
    background-color: #252728 !important;
}

.btn-light.bg-gray:hover {
    color: var(--addon-white) !important;
    background-color: #252728 !important;
    border-color: #1f2021 !important;
}

button.btn-light.bg-gray:hover,
button.btn-light.bg-gray:focus {
    background-color: #252728 !important;
}

.btn-light.bg-gray:focus,
.btn-light.bg-gray.focus {
    -webkit-box-shadow: 0 0 0 0.2rem rgb(55 58 60 / 50%) !important;
    box-shadow: 0 0 0 0.2rem rgb(55 58 60 / 50%) !important;
}

.btn-default,
.btn-secondary {
    color: var(--addon-white) !important;
    background-color: var(--addon-light-black) !important;
    border-color: var(--addon-dark-grey) !important;
}

.table th,
table.collection th,
table.flexible th,
.generaltable th,
.table td,
table.collection td,
table.flexible td,
.generaltable td {
    border-color: var(--addon-black) !important
}

.table thead th,
table.collection thead th,
table.flexible thead th,
.generaltable thead th {
    border-color: var(--addon-black) !important;
}


/* ALERTS */

.alert-danger {
    color: var(--addon-lighter-red) !important;
    background-color: var(--addon-dark-red) !important;
}

.alert .close {
    text-shadow: none !important;
}


/* NOTIFICATIONS PREFERENCES */

.preferences-container .preference-table tr th:nth-child(even),
.preferences-container .preference-table tr td:nth-child(even) {
    background-color: var(--addon-light-black) !important;
}


/* NOTIFICATIONS MENU */

.popover-region-toggle::before {
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid var(--addon-grey) !important;
}

.popover-region-toggle::after {
    border-left: 9px solid transparent;
    border-right: 9px solid transparent;
    border-bottom: 9px solid var(--addon-black) !important;
}

.popover-region-container {
    margin-top: 6px;
    background-color: var(--addon-black) !important;
    border: 1px solid var(--addon-grey) !important;
}

.popover-region-header-container {
    border-bottom: 1px solid var(--addon-grey) !important;
}

.popover-region-footer-container {
    border-top: 1px solid var(--addon-grey) !important;
    background-color: var(--addon-black) !important;
}

.region_main_settings_menu_proxy {
    background-color: transparent !important;
}


/* Feedback */


/* Preview page and form */

.path-mod-feedback div.feedback_is_dependent {
    background: var(--addon-black) !important;
}


/* Untested warning */

.box.generalbox.feedback_description:before {
    content: "Dark mode warning: Please note that the feedback feature hasn't been thoroughly tested and it might contain white pages!";
    color: var(--addon-lighter-red);
    background-color: var(--addon-dark-red);
    display: block;
    padding: 1rem;
    margin-bottom: 1em;
    font-weight: bold;
}


/* LaTeX + WYSIWIG Math */

img.texrender,
img.Wirisformula {
    filter: invert(1) brightness(300%) opacity(0.8);
}